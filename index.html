<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cyberpunk Tuition Family Network</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --cyan: #00f3ff;
      --pink: #ff00ff;
      --dark: #050505;
      --red: #ff3131;
    }
    body {
      margin: 0;
      padding: 0;
      background-color: var(--dark);
      color: white;
      font-family: 'Rajdhani', sans-serif;
      overflow-x: hidden;
    }
    .font-orbitron { font-family: 'Orbitron', sans-serif; }
    .font-mono { font-family: 'JetBrains Mono', monospace; }
    
    body::before {
      content: " ";
      display: block;
      position: fixed;
      top: 0; left: 0; bottom: 0; right: 0;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                  linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
      z-index: 100;
      background-size: 100% 2px, 3px 100%;
      pointer-events: none;
    }

    .cyber-border {
      clip-path: polygon(0 0, 100% 0, 100% 85%, 95% 100%, 0 100%);
    }

    .glitch-text {
      text-shadow: 2px 2px var(--pink), -2px -2px var(--cyan);
      animation: glitch 3s infinite;
    }

    @keyframes glitch {
      0% { text-shadow: 2px 2px var(--pink), -2px -2px var(--cyan); }
      2% { text-shadow: 5px 0px var(--pink), -5px 0px var(--cyan); }
      4% { text-shadow: 2px 2px var(--pink), -2px -2px var(--cyan); }
      100% { text-shadow: 2px 2px var(--pink), -2px -2px var(--cyan); }
    }

    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: #000; }
    ::-webkit-scrollbar-thumb { background: var(--cyan); }

    .loading-bar {
      height: 2px;
      background: var(--cyan);
      box-shadow: 0 0 10px var(--cyan);
      animation: loading 2s infinite ease-in-out;
    }
    
    @keyframes loading {
      0% { width: 0%; left: 0%; }
      50% { width: 100%; left: 0%; }
      100% { width: 0%; left: 100%; }
    }

    .zoom-overlay {
      animation: zoomIn 0.3s ease-out;
    }
    @keyframes zoomIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .enter-overlay {
      background: radial-gradient(circle at center, #111 0%, #000 100%);
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="module">
    import React, { useState, useEffect, useRef } from 'https://esm.sh/react@19.0.0';
    import ReactDOM from 'https://esm.sh/react-dom@19.0.0/client';
    import htm from 'https://esm.sh/htm@3.1.1';
    import * as THREE from 'https://esm.sh/three@0.170.0';
    import { 
      Loader2, Users, Camera, ArrowLeft, ShieldAlert, WifiOff, RefreshCw, Volume2, VolumeX, Maximize2, X
    } from 'https://esm.sh/lucide-react@0.460.0';

    const html = htm.bind(React.createElement);
    const DATA_URL = "https://api.npoint.io/95fbab61cc01dcc81586";
    const FALLBACK_PFP = "https://picsum.photos/seed/cyber/400/400";
    const SOCIAL_ICONS = {
      tiktok: "https://cdn-icons-png.flaticon.com/512/3046/3046121.png",
      telegram: "https://cdn-icons-png.flaticon.com/512/2111/2111646.png",
      facebook: "https://cdn-icons-png.flaticon.com/512/5968/5968764.png"
    };

    const Background = () => {
      const containerRef = useRef(null);
      useEffect(() => {
        if (!containerRef.current) return;
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        containerRef.current.appendChild(renderer.domElement);

        // Stars
        const starGeometry = new THREE.BufferGeometry();
        const starPositions = new Float32Array(1500 * 3);
        for (let i = 0; i < 1500 * 3; i++) starPositions[i] = (Math.random() - 0.5) * 1500;
        starGeometry.setAttribute('position', new THREE.BufferAttribute(starPositions, 3));
        const stars = new THREE.Points(starGeometry, new THREE.PointsMaterial({ color: 0x00f3ff, size: 1.5, transparent: true, opacity: 0.4 }));
        scene.add(stars);

        // Grid
        const grid = new THREE.GridHelper(1000, 50, 0xff00ff, 0x111111);
        grid.position.y = -100;
        scene.add(grid);

        // Hologram Humanoid
        const createHologram = () => {
          const group = new THREE.Group();
          const mat = new THREE.MeshBasicMaterial({ color: 0x00f3ff, wireframe: true, transparent: true, opacity: 0.6 });
          
          const head = new THREE.Mesh(new THREE.SphereGeometry(5, 8, 8), mat);
          head.position.y = 45;
          
          const body = new THREE.Mesh(new THREE.CylinderGeometry(8, 6, 25, 6), mat);
          body.position.y = 28;
          
          const lArm = new THREE.Mesh(new THREE.CylinderGeometry(2, 2, 20, 4), mat);
          lArm.position.set(-12, 28, 0);
          lArm.rotation.z = Math.PI / 6;

          const rArm = new THREE.Mesh(new THREE.CylinderGeometry(2, 2, 20, 4), mat);
          rArm.position.set(12, 28, 0);
          rArm.rotation.z = -Math.PI / 6;

          const lLeg = new THREE.Mesh(new THREE.CylinderGeometry(3, 2, 25, 4), mat);
          lLeg.position.set(-6, 10, 0);

          const rLeg = new THREE.Mesh(new THREE.CylinderGeometry(3, 2, 25, 4), mat);
          rLeg.position.set(6, 10, 0);

          group.add(head, body, lArm, rArm, lLeg, rLeg);
          group.position.set(500, -100, -200);
          return group;
        };

        const hologram = createHologram();
        scene.add(hologram);

        let walking = false;
        let walkDir = -1;

        const startWalking = () => {
          if (walking) return;
          walking = true;
          hologram.position.x = walkDir > 0 ? -400 : 400;
          hologram.position.z = -100 - Math.random() * 200;
        };

        camera.position.z = 400;
        const animate = (time) => {
          requestAnimationFrame(animate);
          stars.rotation.y += 0.0001;
          grid.position.z += 1.0;
          if (grid.position.z > 20) grid.position.z = 0;

          if (walking) {
            hologram.position.x += walkDir * 2;
            hologram.rotation.y = walkDir > 0 ? Math.PI/2 : -Math.PI/2;
            // Bobbing motion
            hologram.position.y = -100 + Math.sin(time * 0.01) * 2;
            
            if (Math.abs(hologram.position.x) > 500) {
              walking = false;
              walkDir *= -1;
            }
          } else {
            if (Math.random() < 0.005) startWalking();
          }

          renderer.render(scene, camera);
        };
        animate(0);
        return () => { containerRef.current?.removeChild(renderer.domElement); };
      }, []);
      return html`<div ref=${containerRef} className="fixed inset-0 -z-10 bg-black" />`;
    };

    const ImageZoom = ({ src, onClose }) => html`
      <div className="fixed inset-0 z-[2000] flex items-center justify-center bg-black/95 zoom-overlay p-4" onClick=${onClose}>
        <button className="absolute top-6 right-6 text-white/50 hover:text-[#00f3ff] transition-colors" onClick=${onClose}>
          <${X} className="w-10 h-10" />
        </button>
        <img src=${src} className="max-w-full max-h-full shadow-[0_0_50px_rgba(0,243,255,0.3)] border border-white/10" onClick=${e => e.stopPropagation()} />
      </div>
    `;

    const LoadingScreen = () => html`
      <div className="fixed inset-0 z-[1000] flex flex-col items-center justify-center bg-[#050505] font-orbitron">
        <${Loader2} className="w-16 h-16 text-[#00f3ff] animate-spin mb-8" />
        <h2 className="text-xl font-black text-[#00f3ff] tracking-[0.5em] uppercase mb-4">Syncing Nodes</h2>
        <div className="w-64 h-1 bg-white/5 relative overflow-hidden">
          <div className="loading-bar absolute w-full" />
        </div>
      </div>
    `;

    const App = () => {
      const [data, setData] = useState(null);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(false);
      const [selected, setSelected] = useState(null);
      const [zoomedImage, setZoomedImage] = useState(null);
      const [isMuted, setIsMuted] = useState(false);
      const [hasEntered, setHasEntered] = useState(false);
      const audioRef = useRef(null);

      const fetchData = async () => {
        setLoading(true);
        setError(false);
        try {
          const res = await fetch(DATA_URL);
          if (!res.ok) throw new Error("Sync Failed");
          const json = await res.json();
          setData(json);
          setLoading(false);
        } catch (e) {
          setError(true);
          setLoading(false);
        }
      };

      useEffect(() => { 
        fetchData();
        audioRef.current = new Audio('media/1.mp3');
        audioRef.current.loop = true;
      }, []);

      const handleEnter = () => {
        setHasEntered(true);
        audioRef.current.play().catch(e => console.log("Audio play blocked", e));
      };

      const toggleMute = () => {
        if (!audioRef.current) return;
        const newState = !isMuted;
        setIsMuted(newState);
        audioRef.current.muted = newState;
      };

      if (!hasEntered) return html`
        <div className="fixed inset-0 z-[3000] enter-overlay flex flex-col items-center justify-center font-orbitron">
           <div className="w-24 h-24 border-2 border-[#00f3ff] flex items-center justify-center mb-8 animate-pulse">
             <span className="text-4xl font-black text-[#00f3ff]">TF</span>
           </div>
           <h1 className="text-4xl font-black text-white tracking-[0.4em] mb-12 uppercase glitch-text text-center px-4">Initialize Interface</h1>
           <button onClick=${handleEnter} className="group relative px-16 py-6 border-2 border-[#00f3ff] text-[#00f3ff] font-black uppercase tracking-[0.5em] hover:bg-[#00f3ff] hover:text-black transition-all">
             Establish Link
             <div className="absolute -top-1 -left-1 w-3 h-3 bg-[#ff00ff]" />
             <div className="absolute -bottom-1 -right-1 w-3 h-3 bg-[#ff00ff]" />
           </button>
           <p className="mt-8 text-white/20 font-mono text-[10px] uppercase tracking-[0.2em]">Biometric Auth Required</p>
        </div>
      `;

      if (loading) return html`<${LoadingScreen} />`;
      if (error) return html`<div className="fixed inset-0 z-[1000] flex flex-col items-center justify-center bg-black font-orbitron text-center">
        <${WifiOff} className="w-16 h-16 text-red-500 mb-6" />
        <h1 className="text-3xl font-black text-red-500 uppercase mb-4">Sync Failure</h1>
        <button onClick=${fetchData} className="px-10 py-4 border-2 border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition-all">Retry</button>
      </div>`;

      const { mainProfile, friends } = data;

      return html`
        <div className="min-h-screen text-white relative">
          <${Background} />
          
          ${zoomedImage && html`<${ImageZoom} src=${zoomedImage} onClose=${() => setZoomedImage(null)} />`}

          <header className="fixed top-0 left-0 w-full z-50 bg-black/60 backdrop-blur-md border-b border-white/10 px-6 py-4 flex justify-between items-center">
            <div className="flex items-center gap-3">
              <div className="w-8 h-8 border border-[#00f3ff] flex items-center justify-center font-black text-[#00f3ff] text-sm">TF</div>
              <h1 className="text-lg font-black font-orbitron tracking-tighter uppercase hidden sm:block">Tuition Family</h1>
            </div>
            <div className="flex items-center gap-6">
              <button onClick=${toggleMute} className="text-white/40 hover:text-[#00f3ff] transition-colors">
                ${isMuted ? html`<${VolumeX} className="w-5 h-5" />` : html`<${Volume2} className="w-5 h-5" />`}
              </button>
              <div className="font-mono text-[9px] text-[#00f3ff] uppercase tracking-widest animate-pulse">Sync: Active</div>
            </div>
          </header>

          <main className="pt-28 pb-20 px-6 max-w-6xl mx-auto">
            <section className="mb-20 flex flex-col md:flex-row gap-10 items-center md:items-start">
              <div className="relative shrink-0 group cursor-zoom-in" onClick=${() => setZoomedImage(mainProfile.pfp || FALLBACK_PFP)}>
                <img src=${mainProfile.pfp || FALLBACK_PFP} className="w-48 h-48 md:w-64 md:h-64 object-cover border-2 border-[#00f3ff]/30 shadow-[0_0_20px_rgba(0,243,255,0.2)] cyber-border transition-transform group-hover:scale-105" />
                <div className="absolute inset-0 bg-[#00f3ff]/10 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity">
                   <${Maximize2} className="w-10 h-10 text-[#00f3ff]" />
                </div>
              </div>
              <div className="flex-1 text-center md:text-left">
                <h2 className="text-5xl md:text-7xl font-black font-orbitron uppercase mb-4 glitch-text leading-tight">${mainProfile.name}</h2>
                <p className="text-white/60 font-mono text-sm border-l-2 border-[#ff00ff] pl-4 italic mb-8">${mainProfile.bio}</p>
                <div className="flex flex-wrap justify-center md:justify-start gap-4">
                  ${Object.entries(mainProfile.socials || {}).map(([k, v]) => v && html`
                    <a key=${k} href=${v} target="_blank" className="p-3 bg-white/5 border border-white/10 hover:border-[#00f3ff] transition-all">
                      <img src=${SOCIAL_ICONS[k]} className="w-5 h-5 invert" />
                    </a>
                  `)}
                </div>
              </div>
            </section>

            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-24">
              ${(mainProfile.photos || []).map((p, i) => html`
                <div key=${i} className="aspect-square border border-white/5 overflow-hidden group cursor-zoom-in" onClick=${() => setZoomedImage(p)}>
                  <img src=${p} className="w-full h-full object-cover grayscale opacity-50 group-hover:grayscale-0 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700" />
                </div>
              `)}
            </div>

            <div className="flex items-center gap-4 mb-10">
              <${Users} className="w-6 h-6 text-[#ff00ff]" />
              <h2 className="text-2xl font-orbitron font-black uppercase tracking-widest">Network Nodes</h2>
              <div className="flex-1 h-px bg-white/10" />
            </div>

            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
              ${friends.map(f => html`
                <div key=${f.id} onClick=${() => setSelected(f)} className="group cursor-pointer bg-white/5 border border-white/10 p-5 cyber-border hover:bg-white/10 transition-all">
                  <img src=${f.pfp || FALLBACK_PFP} className="w-full aspect-square object-cover mb-4 border border-white/10 grayscale group-hover:grayscale-0 transition-all" />
                  <h3 className="font-orbitron font-bold uppercase text-[#00f3ff]">${f.name}</h3>
                  <p className="text-[10px] font-mono text-white/40 uppercase line-clamp-2 mt-1">${f.bio}</p>
                </div>
              `)}
            </div>
          </main>

          ${selected && html`
            <div className="fixed inset-0 z-[600] flex items-center justify-center p-4">
              <div className="absolute inset-0 bg-black/90 backdrop-blur-sm" onClick=${() => setSelected(null)} />
              <div className="relative w-full max-w-4xl bg-[#0a0a0a] border border-[#00f3ff]/30 p-8 flex flex-col md:flex-row gap-8 cyber-border max-h-[90vh] overflow-y-auto">
                <button onClick=${() => setSelected(null)} className="absolute top-4 right-4 p-2 bg-white/5 hover:bg-red-500 transition-all">
                  <${X} className="w-5 h-5" />
                </button>
                <div className="w-full md:w-1/3">
                  <div className="relative group cursor-zoom-in mb-6" onClick=${() => setZoomedImage(selected.pfp || FALLBACK_PFP)}>
                    <img src=${selected.pfp || FALLBACK_PFP} className="w-full aspect-square object-cover border border-white/10 transition-transform group-hover:scale-105" />
                    <div className="absolute inset-0 bg-[#00f3ff]/10 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity">
                      <${Maximize2} className="w-8 h-8 text-[#00f3ff]" />
                    </div>
                  </div>
                  <h3 className="text-3xl font-black font-orbitron uppercase text-[#00f3ff]">${selected.name}</h3>
                  <p className="text-xs font-mono text-white/50 mt-4 leading-relaxed">${selected.bio}</p>
                </div>
                <div className="flex-1">
                  <div className="flex items-center gap-3 mb-6 border-b border-white/10 pb-2">
                    <${Camera} className="w-4 h-4 text-[#ff00ff]" />
                    <span className="font-orbitron text-sm uppercase">Node Assets</span>
                  </div>
                  ${selected.photos?.length ? html`
                    <div className="grid grid-cols-2 gap-4">
                      ${selected.photos.map((p, i) => html`
                        <div key=${i} className="group cursor-zoom-in overflow-hidden border border-white/5" onClick=${() => setZoomedImage(p)}>
                          <img src=${p} className="w-full aspect-video object-cover transition-transform group-hover:scale-110" />
                        </div>
                      `)}
                    </div>
                  ` : html`<div className="text-center py-20 opacity-20"><${ShieldAlert} className="w-12 h-12 mx-auto mb-2" /><span className="text-[10px] uppercase font-mono">No assets found</span></div>`}
                </div>
              </div>
            </div>
          `}
        </div>
      `;
    };

    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(React.createElement(App));
  </script>
</body>
</html>